@import "tailwindcss";

/* -------------------------------------------------------------------------- */
/* 1. Global Theme Variables                         */
/* -------------------------------------------------------------------------- */

:root {
  /* Colors - Light Theme (Default) */
  --color-text-base: 17, 24, 39; /* text-gray-900 */
  --color-text-reverse: 243, 244, 246; /* text-gray-100 for dark text on light bg */
  --color-bg-body: 249, 250, 251; /* bg-gray-50 - Used for the main page background/fade */
  --color-bg-card: 255, 255, 255; /* bg-white - Used for internal panels/containers */
  --color-primary-accent: 59, 130, 246; /* Accent color (e.g., blue-500) */
  --color-border-base: 229, 231, 235; /* gray-200 */
  --color-fade-overlay: 255, 255, 255; /* The color of the fading gradient on the body (usually matches --color-bg-body) */

  --color-premium-yellow: 255, 193, 7; /* amber-100 - For premium features */
  --color-premium-yellow-light: 255, 243, 205; /* amber-200 - Lighter shade for hover effects */
  --color-light-blue-accent: 191, 219, 255; /* Blue-50 - For lighter accents */

  --color-gray-text: 107, 114, 128;

  /* Specific Components */
  --loading-shine-alpha: 0.2; /* Opacity of the loading animation shine */
  --role-color: 59, 130, 246; /* Blue-500 - For premium checkbox */

  /* Mesh Background Gradient (Static Blue for Light/Dark in this example) */
  --mesh-color-1: 96, 165, 250; /* blue-400 */
  --mesh-color-2: 96, 165, 250; /* blue-400 */
  --mesh-color-3: 59, 130, 246; /* blue-500 */

  /* Grey Gradient for Skeleton Loader with transparency */
  --skeleton-gradient-start: 243, 244, 246, 0.5; /* gray-100 */
  --skeleton-gradient-end: 229, 231, 235, 0.5; /* gray-50 */

  /* Rotating Border Colors (Fixed Rainbow for flair) */
  --rotating-border-c1: 255, 0, 0, 0.3;
  --rotating-border-c2: 0, 255, 0, 0.3;
  --rotating-border-c3: 0, 0, 255, 0.3;
  --rotating-border-c4: 255, 0, 255, 0.3;
  --rotating-border-c5: 0, 255, 255, 0.3;
  --rotating-border-c6: 255, 255, 0, 0.3;

  /* Message Colors */
  /* LIGHT MODE MESSAGE COLORS */

  /* Error (Red) */
  --color-error-strong: 239, 68, 68; /* Red-500: Text/Icon */
  --color-error-medium: 254, 202, 202; /* Red-200: Border/Water Drop */
  --color-error-tint: 254, 242, 242; /* Red-50: Light Gradient End */

  /* Alert (Yellow/Amber) */
  --color-alert-strong: 245, 158, 11; /* Amber-500: Text/Icon */
  --color-alert-medium: 253, 230, 138; /* Yellow-200: Border/Water Drop */
  --color-alert-tint: 255, 251, 235; /* Yellow-50: Light Gradient End */

  /* Success (Green) */
  --color-success-strong: 34, 197, 94; /* Green-500: Text/Icon */
  --color-success-medium: 187, 247, 208; /* Green-200: Border/Water Drop */
  --color-success-tint: 236, 253, 245; /* Green-50: Light Gradient End */

  /* Info (Blue/Default) */
  --color-info-strong: 96, 165, 250; /* Blue-400: Text/Icon */
  --color-info-medium: 191, 219, 254; /* Blue-200: Border/Water Drop */
  --color-info-tint: 239, 246, 255; /* Blue-50: Light Gradient End */
}

/* -------------------------------------------------------------------------- */
/* 2. Dark Theme Overrides                         */
/* -------------------------------------------------------------------------- */

body.dark {
  --color-text-base: 243, 244, 246; /* text-gray-100 */
  --color-text-reverse: 17, 24, 39; /* text-gray-900 for light text on dark bg */
  --color-bg-body: 15, 15, 20; /* dark blue */
  --color-bg-card: 31, 41, 55; /* bg-gray-800 */
  --color-primary-accent: 147, 197, 253; /* Blue-300 for contrast */
  --color-border-base: 55, 65, 81; /* gray-700 */
  --color-fade-overlay: 17, 24, 39; /* Should match the dark body background */

  --color-premium-yellow: 255, 193, 7; /* amber-300 - For premium features */

  --color-gray-text: 229, 231, 235;

  /* Specific Components */
  --loading-shine-alpha: 0.1;
  --role-color: 147, 197, 253; /* Blue-300 for dark mode accent */

  /* Grey Gradient for Skeleton Loader with transparency */
  --skeleton-gradient-start: 243, 244, 246, 0.1; /* gray-100 */
  --skeleton-gradient-end: 229, 231, 235, 0.1; /* gray-50 */

  /* Mesh Background - Optional change for dark theme */
  --mesh-color-1: 30, 55, 80;
  --mesh-color-2: 31, 41, 55;
  --mesh-color-3: 17, 24, 39;

  /* Dark Error */
  --color-error-strong: 252, 165, 165; /* Red-300 */
  --color-error-medium: 153, 27, 27; /* Red-800 */
  --color-error-tint: 43, 8, 8; /* Dark Red-950 */

  /* Dark Alert */
  --color-alert-strong: 251, 191, 36; /* Amber-400 */
  --color-alert-medium: 113, 63, 18; /* Amber-900 */
  --color-alert-tint: 38, 24, 6; /* Dark Amber-950 */

  /* Dark Success */
  --color-success-strong: 134, 239, 172; /* Green-300 */
  --color-success-medium: 16, 185, 129; /* Green-500 */
  --color-success-tint: 4, 15, 8; /* Dark Green-950 */

  /* Dark Info */
  --color-info-strong: 147, 197, 253; /* Blue-300 */
  --color-info-medium: 29, 78, 216; /* Blue-700 */
  --color-info-tint: 6, 17, 34; /* Dark Blue-950 */
}

/* -------------------------------------------------------------------------- */
/* 3. Themed CSS Logic                             */
/* -------------------------------------------------------------------------- */

#root,
html,
body {
  overflow: hidden;
  overflow-y: auto;
  scroll-behavior: smooth;
}

#root {
  display: flex;
  justify-content: center;
}

.customBackground {
  overflow: hidden;
  position: relative;
}
/* NOTE: Image URLs are kept as they are static assets, not theme-related colors. */
.customBackground::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url("../src/assets/images/cover_bg.png");
  opacity: 0.95;
  background-size: cover;
}

.customBackground::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /*background: black;*/
}
body.dark .customBackground::after {
  background: black;
  opacity: 0.2;
}

body {
  margin: 0;
  background-color: rgb(var(--color-bg-body));
  color: rgb(var(--color-text-base));
  transition: background-color 0.3s, color 0.3s;
  position: relative; /* creates a stacking context */
  z-index: 0; /* puts body content above ::before/::after */
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  background-image: url("../src/assets/images/musicbg.png");
  background-size: 400px;
  background-repeat: repeat;

  opacity: 0.1;
  z-index: -2; /* safely behind everything */
}
body.dark::before {
  background-blend-mode: difference;
  opacity: 1;
}

body::after {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  background: linear-gradient(
    to bottom,
    rgb(var(--color-fade-overlay)) 50%,
    transparent 100%
  );

  z-index: -1; /* above ::before, below content */
}
html {
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}
img {
  max-width: none !important;
}

/* Animations (Kept as is - not theme related) */
@keyframes move-out {
  from {
    opacity: 1;
    transform: translateY(0);
  }
  to {
    opacity: 0.5;
    transform: translateY(-35%);
  }
}

@keyframes move-in {
  from {
    clip-path: polygon(0% 100%, 100% 100%, 100% 100%, 0% 100%);
  }
  to {
    clip-path: polygon(0% 100%, 100% 0%, 100% 0%, 0% 0%);
  }
}

/* Apply the move-in animation when the page is entering */
.page-container.entering {
  animation: move-in 1.5s cubic-bezier(0.87, 0, 0.13, 1) both;
}

/* Apply the move-out animation when the page is exiting */
.page-container.exiting {
  animation: move-out 1.5s cubic-bezier(0.87, 0, 0.13, 1) both;
}

/* Default page container styles */
.page-container {
  position: absolute;
  width: 100vw !important;
  height: 100vh !important;
}

.animate-down {
  animation: loadDown 0.5s cubic-bezier(0.87, 0, 0.13, 1);
}

.animate-down-start {
  animation: loadDown 1s cubic-bezier(0.87, 0, 0.13, 1);
}

@keyframes loadDown {
  from {
    transform: translateY(-50%);
    opacity: 0;
  }
  to {
    transform: translateY(0%);
    opacity: 1;
  }
}

.animate-left {
  animation: loadLeft 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.animate-left-normal {
  animation: loadLeft 1s linear;
}
@keyframes loadLeft {
  from {
    transform: translateX(-50%);
    opacity: 0;
  }
  to {
    transform: translateX(0%);
    opacity: 1;
  }
}

.animate-right {
  animation: loadRight 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
.animate-right-normal {
  animation: loadRight 1s linear;
}
@keyframes loadRight {
  from {
    transform: translateX(500px);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
.animation-delay-200 {
  animation-delay: 500ms;
}
.animate-appear {
  animation: appear 2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}
@keyframes appear {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* This uses the theme's background color variable */
.gradient-overlay {
  background: linear-gradient(
    transparent,
    rgba(var(--color-bg-card), 0.25),
    rgb(var(--color-bg-card))
  );
}

.p-dropdown-label{
  border: 0 !important;
}

/* This uses the theme's mesh color variables */
.meshBg {
  background: rgb(var(--mesh-color-3));
  background: radial-gradient(
    circle,
    rgb(var(--mesh-color-1)) 19%,
    rgb(var(--mesh-color-2)) 31%,
    rgb(var(--mesh-color-3)) 85%
  );
}

.loading-animation {
  position: relative;
  overflow: hidden;
}
/* This uses the theme's card color and alpha variable */
.loading-animation::before {
  content: "";
  position: absolute;
  width: 15%;
  height: 100%;
  top: 0;
  background: rgba(var(--color-bg-card), var(--loading-shine-alpha));
  filter: blur(10px);
  transform: skew(-10deg);
  animation: loadingData 2s cubic-bezier(0.175, 0.885, 0.32, 1.275) infinite;
}

@keyframes loadingData {
  from {
    left: -10%;
  }
  to {
    left: 110%;
  }
}

.loading-box {
  animation: LoadingBox 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) alternate
    infinite;
}

@keyframes LoadingBox {
  from {
    opacity: 0.5;
  }
  to {
    opacity: 1;
  }
}

/* This uses the theme's card color variable */
.rotatingBorder {
  position: relative;
  z-index: 0;
  outline: 2px solid transparent;
  background: rgb(var(--color-bg-card));
  border-radius: 8px;
}
/* This uses the theme's card color variable */
.rotatingBorder::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgb(var(--color-bg-card));
  border-radius: 10px;
  z-index: -1;
}
/* This uses the fixed rotating border variables (can be customized per theme) */
.rotatingBorder::before {
  content: "";
  position: absolute;
  top: -4px;
  left: -4px;
  right: -4px;
  bottom: -4px;
  background: linear-gradient(
    45deg,
    rgba(var(--rotating-border-c1)),
    rgba(var(--rotating-border-c2)),
    rgba(var(--rotating-border-c3)),
    rgba(var(--rotating-border-c4)),
    rgba(var(--rotating-border-c5)),
    rgba(var(--rotating-border-c6)),
    rgba(var(--rotating-border-c1))
  );
  background-size: 400% 400%;
  /* Blur the background */
  filter: blur(8px);
  border-radius: 10px;
  z-index: -1;
  animation: rotateBorder 10s linear infinite;
}

@keyframes rotateBorder {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 400% 50%;
  }
}

.paymentStatusDialog {
  .p-dialog-content {
    padding: 1rem 1.5rem 2rem 1.5rem;
  }
}

.expandBox {
  animation: expandFrom 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes expandFrom {
  0%,
  70% {
    transform: scale(0);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.p-dialog-mask,
.p-multiselect-panel {
  z-index: 2000 !important;
}
.p-dialog {
  z-index: 2001 !important;
}
.modal {
  z-index: 3000 !important; /* or less if you want dialogs on top */
}

[data-rmiz-modal-overlay="visible"] {
  background-color: rgba(0, 0, 0, 0.3) !important;
  backdrop-filter: blur(5px);
}

.lyrics-searchBox {
  .p-autocomplete-input {
    width: 100%;
  }
}

.custom-checkbox .p-checkbox-box {
  width: 1.5rem; /* Adjust checkbox size */
  height: 1.5rem;
  border-radius: 4px;
}

/* This uses the theme's role color variable */
.custom-checkbox.p-checkbox-checked .p-checkbox-box {
  background-color: rgb(var(--role-color)) !important;
  border-color: rgb(var(--role-color)) !important;
}

@keyframes wave {
  0% {
    transform: rotate(0deg);
  }
  15% {
    transform: rotate(15deg);
  }
  30% {
    transform: rotate(-10deg);
  }
  45% {
    transform: rotate(10deg);
  }
  60% {
    transform: rotate(-5deg);
  }
  75% {
    transform: rotate(5deg);
  }
  100% {
    transform: rotate(0deg);
  }
}

.customHeader {
  padding: 0.5rem 1rem !important;
  border: none !important;
  .p-dialog-title {
    font-size: medium !important;
  }
  .p-dialog-header-icons {
    align-self: center !important;
  }
}
.customContent {
  padding: 0.75rem 1rem !important;
  border: none !important;
}

.glitching {
  /* animation: glitching 5s infinite; */
}

/* Glitch Text Base */
.glitch-text {
  position: relative;
}

/* Primary Color Displacement/Shadow */
.glitch-text::before,
.glitch-text::after {
  content: attr(data-text); /* Important: You might need to add data-text prop to your motion.span */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

/* Red Channel Displacement */
.glitch-text::before {
  left: 1px; /* Slight offset */
  text-shadow: -1px 0 red;
  /* Add an animation to constantly flicker this layer */
  animation: glitch-shadow-1 0.7s infinite linear alternate-reverse;
}

/* Cyan/Blue Channel Displacement */
.glitch-text::after {
  left: -1px; /* Slight offset in the opposite direction */
  text-shadow: 1px 0 cyan;
  /* Add an animation to constantly flicker this layer */
  animation: glitch-shadow-2 0.7s infinite linear alternate;
}

/* Keyframes for the glitch flicker and constant movement */
@keyframes glitch-shadow-1 {
  0% {
    clip-path: inset(10% 0 85% 0); /* Random vertical slice */
  }
  25% {
    clip-path: inset(80% 0 5% 0);
  }
  50% {
    clip-path: inset(25% 0 60% 0);
  }
  75% {
    clip-path: inset(5% 0 90% 0);
  }
  100% {
    clip-path: inset(50% 0 45% 0);
  }
}

@keyframes glitch-shadow-2 {
  0% {
    clip-path: inset(50% 0 45% 0);
  }
  20% {
    clip-path: inset(5% 0 90% 0);
  }
  40% {
    clip-path: inset(30% 0 65% 0);
  }
  60% {
    clip-path: inset(90% 0 5% 0);
  }
  80% {
    clip-path: inset(15% 0 80% 0);
  }
  100% {
    clip-path: inset(70% 0 10% 0);
  }
}

@keyframes glitching {
  0%,
  5%,
  10%,
  15%,
  20%,
  25%,
  30% {
    transform: translateX(-1px);
  }
  2%,
  7%,
  12%,
  17%,
  22%,
  27%,
  32% {
    transform: translateX(1px);
  }
  50%,
  100% {
    transform: translateX(0);
  }
}

.lyrics-wrapper {
  padding-left: 1.5rem; /* base = 24px */
  padding-right: 1.5rem;
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 1rem;
}

/* Tablet (768px and up) */
@media (min-width: 768px) {
  .lyrics-wrapper {
    padding-left: 1rem; /* 16px */
    padding-right: 1rem;
    padding-top: 4rem;
    gap: 2rem;
  }
}

/* Desktop (1024px and up) */
@media (min-width: 1024px) {
  .lyrics-width {
    width: 100%;
    max-width: 800px; /* Adjust as needed */
  }
  .lyrics-wrapper {
    padding-left: 6rem; /* 96px */
    padding-right: 6rem;
  }
}

.checkbox-fade {
  opacity: 0;
  animation: fadeIn 2s forwards;
}
@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

.gradientTitle {
  font-weight: 700;
}

.p-inputtext {
  background-color: transparent !important;
  color: rgb(var(--color-text-base)) !important;
  border: 1px solid rgb(var(--color-border-base)) !important;
}

#modal-root {
  position: fixed;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  z-index: 9999;
}

.metronome {
  width: 2px;
  height: 100%;
  background: red;
  position: absolute;
  bottom: 0;
  transform-origin: bottom;
  animation-name: metronomeMoving;
  animation-timing-function: cubic-bezier(0.87, 0, 0.13, 1);
  animation-direction: infinite alternate;
}

@keyframes metronomeMoving {
  from {
    transform: rotate(-90deg);
  }
  to {
    transform: rotate(90deg);
  }
}
.metronomeSpin {
  z-index: 1;
}

.metronomeSpin {
  width: 105px;
  height: 105px;
  z-index: 2;
  border-radius: 50%;

  /* Retained border setup from your original code */
  border: 10px solid rgb(var(--color-bg-card));
  border-bottom: 0;

  /* 🔥 FIX 1: COMBINE animation properties */
  animation-name: metronomeSpinning;
  animation-duration: 2s; /* Temporary placeholder. We'll set this via React. */
  animation-timing-function: cubic-bezier(0.87, 0, 0.13, 1);
  animation-iteration-count: infinite; /* Equivalent to your "infinite" direction */
  animation-direction: alternate; /* The actual direction property */
  animation-play-state: paused; /* Start paused, control via React */
}

@keyframes metronomeSpinning {
  from {
    transform: rotate(-45deg); /* Start slightly left */
  }
  to {
    transform: rotate(45deg); /* Swing to the right */
  }
}

@keyframes heart-pop-burst {
  /* Start small, rotated, and invisible */
  0% {
    transform: scale(0) rotate(-30deg);
    opacity: 0;
  }
  /* Burst to maximum size with a subtle glow */
  50% {
    transform: scale(1.6) rotate(10deg);
    opacity: 1;
    filter: brightness(1.5);
  }
  /* Settle back to final size and rotation */
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
    filter: brightness(1);
  }
}

.animate-heart-pop {
  /* Apply the animation once (forwards) over 0.7 seconds */
  animation: heart-pop-burst 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) 1
    forwards;
  /* Ensure transform can be applied */
  display: inline-block;
}

/* -------------------------------------------------------------------------- */
/* 3. Custom Classes                                                          */
/* -------------------------------------------------------------------------- */
.c-bg {
  background-color: rgb(var(--color-fade-overlay)) !important;
}

.c-bg-2 {
  background-color: rgb(var(--color-bg-card)) !important;
}

.c-primary {
  background-color: rgb(var(--color-primary-accent)) !important;
}

.c-reverse {
  color: rgb(var(--color-text-reverse)) !important;
}

.c-bg-white {
  background-color: rgb(var(--color-bg-body)) !important;
}

.c-border {
  border-color: rgb(var(--color-border-base)) !important;
}

.c-text {
  color: rgb(var(--color-text-base)) !important;
}

.c-text-primary {
  color: rgb(var(--color-primary-accent)) !important;
}

.c-text-accent {
  color: rgb(var(--color-primary-accent)) !important;
}

.c-premium-bg {
  background: linear-gradient(
    90deg,
    rgb(var(--color-premium-yellow)),
    rgb(var(--color-premium-yellow-light))
  );
}

.c-card-bg {
  background-color: rgb(var(--color-bg-card)) !important;
}

.c-linear-bg {
  background: linear-gradient(
    to bottom right,
    rgb(var(--color-primary-accent)),
    rgb(var(--color-fade-overlay))
  ) !important;
}

.c-loading-box-gradient {
  background: linear-gradient(
    90deg,
    rgba(var(--skeleton-gradient-start)) 0%,
    rgba(var(--skeleton-gradient-end)) 50%,
    rgba(var(--skeleton-gradient-start)) 100%
  );
  animation: loadingGradient 1.5s infinite;
}

.c-announcement-bg {
  background-color: rgb(var(--color-light-blue-accent)) !important;
}

body.dark .c-announcement-bg {
  background-color: rgb(var(--color-bg-card)) !important;
}

.c-error-box {
  background: rgb(var(--color-error-tint)) !important;
  color: rgb(var(--color-error-strong)) !important;
  border: 1px solid rgb(var(--color-error-medium)) !important;
}

.c-alert-box {
  background: rgb(var(--color-alert-tint)) !important;
  color: rgb(var(--color-alert-strong)) !important;
  border: 1px solid rgb(var(--color-alert-medium)) !important;
}

.c-success-box {
  background: rgb(var(--color-success-tint)) !important;
  color: rgb(var(--color-success-strong)) !important;
  border: 1px solid rgb(var(--color-success-medium)) !important;
}
.c-info-box {
  background: rgb(var(--color-info-tint)) !important;
  color: rgb(var(--color-info-strong)) !important;
  border: 1px solid rgb(var(--color-info-medium)) !important;
}

.c-gray-text {
  color: rgb(var(--color-gray-text));
}

.blend {
  mix-blend-mode: multiply; /* or screen/difference depending on effect */
}
.image-blend {
  mix-blend-mode: difference; /* or screen/difference depending on effect */
}
body.dark {
  .invertColor {
    filter: invert(1);
  }
}

.c-dd {
  .p-inputtext {
    border: 0 !important;
  }
}
