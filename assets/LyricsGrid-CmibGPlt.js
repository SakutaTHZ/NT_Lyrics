import{r,j as t}from"./index-c3mG_79U.js";import{u as L,L as h}from"./LyricsRow-C66mQx1d.js";import{L as y}from"./LyricsCard-QHrJ_xJy.js";import{P as g}from"./Normal_Button-DJHYMqtF.js";import"./MessagePopup-DbCR27L4.js";import"./index-B3y1kd7H.js";import"./index-lo3keG76.js";import"./index-85vJW2Bo.js";import"./index-C2moNEq-.js";const j=({fetchLyrics:a})=>{const[i,m]=r.useState([]),[u,p]=r.useState(1),[n,l]=r.useState(!0),c=r.useRef(null),f=L(),d=7;return r.useEffect(()=>{(async()=>{const s=await a(u,d);if(s.length===0){l(!1);return}m(o=>[...o,...s])})()},[u,a]),r.useEffect(()=>{if(!n||!c.current)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&p(o=>o+1)},{threshold:1});return e.observe(c.current),()=>e.disconnect()},[n,i.length]),t.jsxs(t.Fragment,{children:[i.map((e,s)=>{const o=s===i.length-1;return t.jsx("div",{ref:o?c:null,className:"m-0 p-0",children:f?t.jsx(h,{id:s,lyric:e}):t.jsx(y,{id:s,lyric:e})},s)}),n&&t.jsx("p",{children:"Loading more..."})]})};j.propTypes={fetchLyrics:g.func.isRequired};export{j as default};
