import{r,j as t}from"./index-DVTODEav.js";import{u as h,L as y,a as L}from"./LyricsRow-CUev1yOp.js";import{P as g}from"./Normal_Button-C4mYL3sp.js";import"./Lyrics_sample-DbaoSwNR.js";import"./index-XQCrZx2Y.js";import"./iconBase-CA8JbO3F.js";import"./index-CG0Q28Qj.js";import"./MessagePopup-Bri-qGMc.js";import"./index-B0-9yzBj.js";import"./index-r1iFSQwA.js";const j=({fetchLyrics:a})=>{const[i,u]=r.useState([]),[p,m]=r.useState(1),[n,l]=r.useState(!0),c=r.useRef(null),f=h(),d=7;return r.useEffect(()=>{(async()=>{const s=await a(p,d);if(s.length===0){l(!1);return}u(o=>[...o,...s])})()},[p,a]),r.useEffect(()=>{if(!n||!c.current)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&m(o=>o+1)},{threshold:1});return e.observe(c.current),()=>e.disconnect()},[n,i.length]),t.jsxs(t.Fragment,{children:[i.map((e,s)=>{const o=s===i.length-1;return t.jsx("div",{ref:o?c:null,className:"m-0 p-0",children:f?t.jsx(y,{id:s,lyric:e}):t.jsx(L,{id:s,lyric:e})},s)}),n&&t.jsx("p",{children:"Loading more..."})]})};j.propTypes={fetchLyrics:g.func.isRequired};export{j as default};
