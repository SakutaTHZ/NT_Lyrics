import{r,j as t}from"./index-CjCeMkON.js";import{u as L,L as h}from"./LyricsRow-DxXm1P4k.js";import{L as y}from"./LyricsCard-Dm_fdzVw.js";import{P as g}from"./Normal_Button-C4G7n-9E.js";import"./MessagePopup-D2qYTE-d.js";import"./index-9Xi1-lQL.js";import"./index-DFasnYbY.js";import"./index-DynJkKpP.js";import"./index-BGBRoWBh.js";const j=({fetchLyrics:a})=>{const[i,m]=r.useState([]),[u,p]=r.useState(1),[n,l]=r.useState(!0),c=r.useRef(null),f=L(),d=7;return r.useEffect(()=>{(async()=>{const s=await a(u,d);if(s.length===0){l(!1);return}m(o=>[...o,...s])})()},[u,a]),r.useEffect(()=>{if(!n||!c.current)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&p(o=>o+1)},{threshold:1});return e.observe(c.current),()=>e.disconnect()},[n,i.length]),t.jsxs(t.Fragment,{children:[i.map((e,s)=>{const o=s===i.length-1;return t.jsx("div",{ref:o?c:null,className:"m-0 p-0",children:f?t.jsx(h,{id:s,lyric:e}):t.jsx(y,{id:s,lyric:e})},s)}),n&&t.jsx("p",{children:"Loading more..."})]})};j.propTypes={fetchLyrics:g.func.isRequired};export{j as default};
