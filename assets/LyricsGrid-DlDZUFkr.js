import{r,j as t}from"./index-s6LL22Ht.js";import{u as L,L as h}from"./LyricsRow-BWqZG-da.js";import{L as y}from"./LyricsCard-C0TVLf17.js";import{P as g}from"./Normal_Button-BkhxAQ4z.js";import"./MessagePopup-CacB4kXX.js";import"./index-CBB_qvJH.js";import"./index-Dvw4NTNt.js";import"./index-rdUp9BS8.js";import"./index-3brWKOb_.js";const j=({fetchLyrics:a})=>{const[i,m]=r.useState([]),[u,p]=r.useState(1),[n,l]=r.useState(!0),c=r.useRef(null),f=L(),d=7;return r.useEffect(()=>{(async()=>{const s=await a(u,d);if(s.length===0){l(!1);return}m(o=>[...o,...s])})()},[u,a]),r.useEffect(()=>{if(!n||!c.current)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&p(o=>o+1)},{threshold:1});return e.observe(c.current),()=>e.disconnect()},[n,i.length]),t.jsxs(t.Fragment,{children:[i.map((e,s)=>{const o=s===i.length-1;return t.jsx("div",{ref:o?c:null,className:"m-0 p-0",children:f?t.jsx(h,{id:s,lyric:e}):t.jsx(y,{id:s,lyric:e})},s)}),n&&t.jsx("p",{children:"Loading more..."})]})};j.propTypes={fetchLyrics:g.func.isRequired};export{j as default};
