import{r,j as t}from"./index-XT8WscD4.js";import{u as h,L as y,a as L}from"./LyricsRow-jntbZG9e.js";import{P as g}from"./Normal_Button-c7XoY3fi.js";import"./Lyrics_sample-DbaoSwNR.js";import"./index-CGBS4Xg_.js";import"./index-CQR-aN3X.js";import"./index-BOPqhepm.js";import"./MessagePopup-yaKOPx-m.js";import"./index-CF2s9ET1.js";const j=({fetchLyrics:a})=>{const[i,p]=r.useState([]),[u,m]=r.useState(1),[n,l]=r.useState(!0),c=r.useRef(null),f=h(),d=7;return r.useEffect(()=>{(async()=>{const s=await a(u,d);if(s.length===0){l(!1);return}p(o=>[...o,...s])})()},[u,a]),r.useEffect(()=>{if(!n||!c.current)return;const e=new IntersectionObserver(s=>{s[0].isIntersecting&&m(o=>o+1)},{threshold:1});return e.observe(c.current),()=>e.disconnect()},[n,i.length]),t.jsxs(t.Fragment,{children:[i.map((e,s)=>{const o=s===i.length-1;return t.jsx("div",{ref:o?c:null,className:"m-0 p-0",children:f?t.jsx(y,{id:s,lyric:e}):t.jsx(L,{id:s,lyric:e})},s)}),n&&t.jsx("p",{children:"Loading more..."})]})};j.propTypes={fetchLyrics:g.func.isRequired};export{j as default};
