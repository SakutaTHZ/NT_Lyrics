import{r as u,u as N,j as c,i as L}from"./index-c3mG_79U.js";import{M as _,s as C}from"./MessagePopup-DbCR27L4.js";import{N as M,P as T}from"./Normal_Button-DJHYMqtF.js";import{a as A}from"./index-85vJW2Bo.js";import{b as P}from"./index-lo3keG76.js";const K=(e=768)=>{const[t,r]=u.useState(window.innerWidth<e);return u.useEffect(()=>{const n=()=>r(window.innerWidth<e);return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),t};var I=new Map,w=new WeakMap,E=0,V=void 0;function z(e){return e?(w.has(e)||(E+=1,w.set(e,E.toString())),w.get(e)):"0"}function B(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?z(e.root):e[t]}`).toString()}function O(e){const t=B(e);let r=I.get(t);if(!r){const n=new Map;let d;const o=new IntersectionObserver(i=>{i.forEach(s=>{var a;const f=s.isIntersecting&&d.some(l=>s.intersectionRatio>=l);e.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=f),(a=n.get(s.target))==null||a.forEach(l=>{l(f,s)})})},e);d=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:n},I.set(t,r)}return r}function F(e,t,r={},n=V){if(typeof window.IntersectionObserver>"u"&&n!==void 0){const a=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:d,observer:o,elements:i}=O(r),s=i.get(e)||[];return i.has(e)||i.set(e,s),s.push(t),o.observe(e),function(){s.splice(s.indexOf(t),1),s.length===0&&(i.delete(e),o.unobserve(e)),i.size===0&&(o.disconnect(),I.delete(d))}}function W({threshold:e,delay:t,trackVisibility:r,rootMargin:n,root:d,triggerOnce:o,skip:i,initialInView:s,fallbackInView:a,onChange:f}={}){var l;const[m,x]=u.useState(null),h=u.useRef(f),[v,p]=u.useState({inView:!!s,entry:void 0});h.current=f,u.useEffect(()=>{if(i||!m)return;let b;return b=F(m,(y,R)=>{p({inView:y,entry:R}),h.current&&h.current(y,R),R.isIntersecting&&o&&b&&(b(),b=void 0)},{root:d,rootMargin:n,threshold:e,trackVisibility:r,delay:t},a),()=>{b&&b()}},[Array.isArray(e)?e.toString():e,m,d,n,o,i,r,a,t]);const j=(l=v.entry)==null?void 0:l.target,S=u.useRef(void 0);!m&&j&&!o&&!i&&S.current!==j&&(S.current=j,p({inView:!!s,entry:void 0}));const g=[x,v.inView,v.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}const $=({id:e,lyric:t})=>{var v;const[r,n]=u.useState(!1),[d,o]=u.useState(""),[i,s]=u.useState(!1),{ref:a,inView:f}=W({triggerOnce:!0,threshold:.1}),l=()=>s(!1);u.useEffect(()=>{l()},[]);const m=N(),x=()=>{m(`/NT_Lyrics/lyricsdetail/${e}`,{state:{lyric:t}})},h=()=>{o(i?"Lyrics has been removed from the collection":"Lyrics has been added to the collection"),s(!i),n(!0),setTimeout(()=>{n(!1)},2e3)};return c.jsxs(c.Fragment,{children:[r&&c.jsx(_,{message_type:"success",message_text:d}),c.jsxs(L.div,{className:"relative flex items-center w-full border-b last:border-0  border-dashed border-gray-200",onClick:x,ref:a,initial:{scale:0,opacity:0,x:0},animate:f?{scale:1,opacity:1,y:0}:{},transition:{duration:.4},children:[c.jsx("img",{src:C,className:"w-12 h-12 object-contain"}),c.jsxs("div",{className:"flex justify-between items-center w-full p-2 pl-4",children:[c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("p",{className:"font-semibold",children:(t==null?void 0:t.title)??"Sample Title"}),c.jsx("p",{className:"text-sm text-gray-500",children:((v=t==null?void 0:t.artist)==null?void 0:v.join(", "))??"Sample Artist"})]}),i?c.jsx(M,{icon:P,text:"",custom_class:"w-8 h-8 border-transparent shadow-sm bg-red-50 text-red-500 transition-all",onClick:p=>{p.stopPropagation(),h()}}):c.jsx(M,{icon:A,text:"",custom_class:"w-8 h-8 border-transparent shadow-sm bg-white transition-all",onClick:p=>{p.stopPropagation(),h()}})]})]})]})};$.propTypes={id:T.string.isRequired,lyric:T.object};export{$ as L,K as u};
